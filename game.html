<html>
    
    <canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
    
    var canvas;
    var canvascontext;
    var ballX = 50;
    var ballSpeedX = 10;
    var ballY = 10;
    var ballSpeedY = 4;
    var paddle1Y, paddle2Y = 250;
    //const - never change
    const paddleThick = 10;
    const paddleHeight = 100;
    
    //call everytime mouse moves
    function calculateMousePos(evt) {
        var rect = canvas.getBoundingClientRect();
        var root = document.documentElement;
        var mouseX = evt.clientX - rect.left - root.scrollLeft;
        var mouseY = evt.clientY - rect.top - root.scrollTop;
        return {
            x:mouseX,
            y:mouseY
        };
    }
    
    window.onload = function () {
        canvas = document.getElementById('gameCanvas');
        canvascontext = canvas.getContext('2d');
        
        //temp local variable
        var framesPerSecond = 30;
        //Inline
        setInterval(function callBoth() {
            moveEverything();
            drawEverything();
        }, 1000/framesPerSecond);
        
        canvas.addEventListener('mousemove', function(evt) {
            var mousePos = calculateMousePos(evt);
            paddle1Y = mousePos.y-(paddleHeight/2);
        });
    }
    
    function ballReset() {
        //reset position
        ballSpeedX = -ballSpeedX;
        ballX = canvas.width/2;
        ballY = canvas.width/2;
    }
    
    //if paddle is below ball, up 6 on y axies and vv.
    function computerMovement(){
        if (paddle2Y < ballY)  {
            paddle2Y += 6;
        } else {
            paddle2Y -= 6;
        }
        
    }
    
    function moveEverything() {
            computerMovement();
        
        //Ball speed
        ballX +=  ballSpeedX;
        ballY +=  ballSpeedY;
        
        //left of zero
        //if below top of paddle && above bottom of paddle
        if(ballX < 0) {
            if(ballY > paddle1Y && 
               ballY < paddle1Y+paddleHeight) {
                //flip ball horziontal speed
                ballSpeedX = -ballSpeedX;
            } else {
            ballReset();
            }
        }
        
        //right of zero
        if(ballX > canvas.width) {
            if(ballY > paddle2Y && 
               ballY < paddle2Y+paddleHeight) {
                //flip ball horziontal speed
                ballSpeedX = -ballSpeedX;
            } else {
            ballReset();
            }
        }
         
        if(ballY < 0) {
            ballSpeedY = -ballSpeedY;
        }
        
        if(ballY > canvas.height) {
            ballSpeedY = -ballSpeedY;
        }
        
    }
    
    function drawEverything() {
        //background
        colourRect(0,0,canvas.width,canvas.height, 'black');
        //left paddle
        colourRect(0,paddle1Y,paddleThick,paddleHeight,'white');
        
        //Right paddle
        colourRect(canvas.width-paddleThick,paddle2Y,paddleThick,paddleHeight,'white');
        
        //draws ball
        colourCircle(ballX, ballY, 10, 'white');
    }
    
    function colourCircle(centerX, centerY, radius, drawColour) {
        canvascontext.fillStyle = drawColour;
        canvascontext.beginPath();
        canvascontext.arc(centerX, centerY, radius, 0,Math.PI*2, true);
        canvascontext.fill();
    }
    
    function colourRect(leftX, topY, width, height, drawColour) {
        //background
        canvascontext.fillStyle = drawColour;
        canvascontext.fillRect(leftX,topY, width,height);
    }
    
    </script>

</html>